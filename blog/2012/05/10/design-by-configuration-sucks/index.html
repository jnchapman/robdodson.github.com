
<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta charset="utf-8">
	<title>Design by Configuration Sucks | Rob Dodson talks internets</title>

	<meta name="author" content="Rob Dodson">
	
	<meta name="description" content="Hi I'm Rob Dodson. A freelance developer specializing in JavaScript and Backbone.js with a touch of Node and Ruby.">

	<meta name="HandheldFriendly" content="True" />
	<meta name="MobileOptimized" content="320" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<link href="/atom.xml" rel="alternate" title="Rob Dodson talks internets" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Open+Sans:700,400" />
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>

<body class="post-template">
  <main class="content" role="main"><article class="post">
  
	<header class="post-header">
		<a id="blog-logo" href="/">Rob Dodson talks internets</a>
	</header>
	<span class="post-meta">10 May 2012</span>
	<h1 class="post-title">Design by Configuration Sucks</h1>
	<div class="newsletter">
  <form action="http://robdodson.us7.list-manage2.com/subscribe/post?u=5727aa0eb1ccbf4ae68284189&amp;id=6719a28b56" method="post" target="_blank" novalidate>
    <p class="newsletter-heading newsletter-primary">Get your learn on.</p>
    <p class="newsletter-heading newsletter-sub">
      Weekly emails cover Web Components, and the future of
      Front-end Development.
    </p>
    <input class="newsletter-email" type="email" value="" name="EMAIL" placeholder="your@email.com">
    <input type="hidden" name="group[4133][1]" value="true">
    <input class="newsletter-submit" type="submit" value="Subscribe" name="subscribe">
  </form>
</div>
	<section class="post-content">
		<h3>What is design by configuration?</h3>

<p>As an experienced developer if you find that you are performing the same actions over and over naturally your brain will start to think &#8220;Hey, this isn&#8217;t very DRY&#8221;. DRY, or the principle of &#8220;Don&#8217;t Repeat Yourself&#8221; is pretty common dogma for most developers. How many times have you heard something like, &#8220;If you&#8217;re doing it twice, you&#8217;re doing it wrong.&#8221; Typically when I do an action more than once I start looking for ways to wrap the work into functions or objects. This process can easily lead to what some refer to as &#8220;Design by Configuration,&#8221; or breaking your work into configurable operations.</p>

<!--more-->


<p>To explore this concept a bit more, and why I think it&#8217;s rather brittle, let&#8217;s come up with a hypothetical. In our scenario we&#8217;re working for a large company redesigning their web presence. On each page we have widgets of various shapes and sizes. Here&#8217;s an example of some:</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;widget-container grey-background rounded-corners&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;widget&quot;</span> <span class="na">title=</span><span class="s">&quot;Awesome Widget&quot;</span> <span class="na">data-foo=</span><span class="s">&quot;bar&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hey I&#39;m an awesome widget!<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;widget-container red-background square-corners&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;widget&quot;</span> <span class="na">title=</span><span class="s">&quot;Stellar Widget&quot;</span> <span class="na">data-foo=</span><span class="s">&quot;baz&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>Bodly going where no widget has gone before...<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></figure>


<p>You&#8217;ve probably already noticed that our two widgets are nearly identical with only subtle differences in the classes, titles and paragraph content. That seems like a great candidate for automation! Because we don&#8217;t know the names of, or how many classes we might support, we&#8217;ll try to make it really flexible so we can pass in tons of different values.</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code><span class="kd">function</span> <span class="nx">makeWidget</span><span class="p">(</span><span class="nx">attributes</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">classes</span><span class="p">,</span>
        <span class="nx">title</span><span class="p">,</span>
        <span class="nx">data</span><span class="p">,</span>
        <span class="nx">paragraph</span><span class="p">,</span>
        <span class="nx">widget</span><span class="p">;</span>

    <span class="nx">classes</span> <span class="o">=</span> <span class="nx">attributes</span><span class="p">[</span><span class="s1">&#39;classes&#39;</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="nx">title</span> <span class="o">=</span> <span class="nx">attributes</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="nx">data</span> <span class="o">=</span> <span class="nx">attributes</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="nx">paragraph</span> <span class="o">=</span> <span class="nx">attributes</span><span class="p">[</span><span class="s1">&#39;paragraph&#39;</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

    <span class="nx">widget</span> <span class="o">=</span> <span class="s1">&#39;&lt;div class=&quot;&#39;</span> <span class="o">+</span> <span class="nx">classes</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&#39;</span><span class="o">+</span>
             <span class="s1">&#39;&lt;div class=&quot;widget&quot; title=&quot;&#39;</span> <span class="o">+</span> <span class="nx">title</span> <span class="o">+</span> <span class="s1">&#39;&quot; data-foo=&quot;&#39;</span> <span class="o">+</span> <span class="nx">data</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&#39;</span><span class="o">+</span>
             <span class="s1">&#39;&lt;p&gt;&#39;</span> <span class="o">+</span> <span class="nx">paragraph</span> <span class="o">+</span> <span class="s1">&#39;&lt;/p&gt;&#39;</span><span class="o">+</span>
             <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="o">+</span>
             <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">widget</span><span class="p">));</span>
<span class="p">}</span>

<span class="nx">makeWidget</span><span class="p">({</span> <span class="nx">classes</span><span class="o">:</span> <span class="s1">&#39;widget-container grey-background rounded-corners&#39;</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Hello World!&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="s1">&#39;ribeye&#39;</span><span class="p">,</span> <span class="nx">paragraph</span><span class="o">:</span> <span class="s1">&#39;Neato paragraph!&#39;</span><span class="p">});</span>
</code></pre></figure>


<p>You can play around with the previous code snippet and create your own widgets in the console or on jsFiddle. Writing a little function like this seems pretty standard for a lot of cases and I don&#8217;t want to argue against it entirely but I do want to point out a few gotchas.</p>

<h3>Everything was perfect. Until it wasn&#8217;t</h3>

<p>Let&#8217;s say that our code works perfectly. We do about 95% of the project and toward the end the client mentions an extra widget that slipped their mind. They&#8217;d like it to act just like all the other widgets but they also want to add an additional class to the <code>p</code> tag. &#8220;Not a problem,&#8221; you think, &#8220;I&#8217;ll just add a paragraphClasses attribute to our hash.&#8221;</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code><span class="kd">function</span> <span class="nx">makeWidget</span><span class="p">(</span><span class="nx">attributes</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">classes</span><span class="p">,</span>
        <span class="nx">title</span><span class="p">,</span>
        <span class="nx">data</span><span class="p">,</span>
        <span class="nx">paragraph</span><span class="p">,</span>
        <span class="nx">paragraphClasses</span>
        <span class="nx">widget</span><span class="p">;</span>

    <span class="nx">classes</span> <span class="o">=</span> <span class="nx">attributes</span><span class="p">[</span><span class="s1">&#39;classes&#39;</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="nx">title</span> <span class="o">=</span> <span class="nx">attributes</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="nx">data</span> <span class="o">=</span> <span class="nx">attributes</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="nx">paragraph</span> <span class="o">=</span> <span class="nx">attributes</span><span class="p">[</span><span class="s1">&#39;paragraph&#39;</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="nx">paragraphClasses</span> <span class="o">=</span> <span class="nx">attributes</span><span class="p">[</span><span class="s1">&#39;paragraphClasses&#39;</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

    <span class="nx">widget</span> <span class="o">=</span> <span class="s1">&#39;&lt;div class=&quot;&#39;</span> <span class="o">+</span> <span class="nx">classes</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&#39;</span><span class="o">+</span>
             <span class="s1">&#39;&lt;div class=&quot;widget&quot; title=&quot;&#39;</span> <span class="o">+</span> <span class="nx">title</span> <span class="o">+</span> <span class="s1">&#39;&quot; data-foo=&quot;&#39;</span> <span class="o">+</span> <span class="nx">data</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&#39;</span><span class="o">+</span>
             <span class="s1">&#39;&lt;p &#39;</span> <span class="o">+</span> <span class="nx">paragraphClasses</span> <span class="o">+</span> <span class="s1">&#39;&gt;&#39;</span> <span class="o">+</span> <span class="nx">paragraph</span> <span class="o">+</span> <span class="s1">&#39;&lt;/p&gt;&#39;</span><span class="o">+</span>
             <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="o">+</span>
             <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">widget</span><span class="p">));</span>
<span class="p">}</span>

<span class="nx">makeWidget</span><span class="p">({</span> <span class="nx">classes</span><span class="o">:</span> <span class="s1">&#39;widget-container grey-background rounded-corners&#39;</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Hello World!&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="s1">&#39;ribeye&#39;</span><span class="p">,</span> <span class="nx">paragraph</span><span class="o">:</span> <span class="s1">&#39;Neato paragraph!&#39;</span><span class="p">});</span>
</code></pre></figure>


<p>Easy enough right? Well, yeah&#8230; except you just changed one line that affects ALL of your widgets. Hope you got all those quotation marks perfect!</p>

<p>Later on your client decides that they&#8217;d like to add one more widget but this time it should have two paragraph tags instead of one. That puts us in a bit of a dilemma&#8230; We could modify our <code>makeWidget</code> function to maybe check if there&#8217;s a <code>subParagraph</code> attribute, or we could just hand code this one widget on this one page. Er..did I say one page? Well actually the client just called and said this widget will need to appear on <em>4</em> pages.</p>

<p>At this point we can either hack our makeWidget function, create an entirely new function like <code>makeSuperWidget</code> or we could hand code a custom widget in 4 places and hope that if there are any changes we remember to update all 4. Typically I think most people choose either the first or second option, figuring that the changes to the original function are small enough or that creating a new function is still much DRYer than hand coding the thing 4 times.</p>

<p>At this point I feel like we&#8217;ve now fallen into the trap of design by configuration. Basically we&#8217;ve setup our function to accept configuration parameters but the core elements are static and extremely hard to change. We can add lots of classes to our containing div and our first p tag but what if we want to add other attributes? Do we need to break open the code every time?</p>

<p>I think a better solution looks a lot like the syntax for D3.js, which provides helpers to make the process of widget creation easier, but it doesn&#8217;t completely remove the developer from the process. Here&#8217;s some pseudo code to illustrate what I think might be a better approach:</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code><span class="nx">widget</span> <span class="o">=</span> <span class="nx">make</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;widget-container grey-background rounded-corners&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;Sweet containing div&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;data-zerp&#39;</span><span class="p">,</span> <span class="s1">&#39;porkchops&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;widget&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;Slick inner div&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;data-foo&#39;</span><span class="p">,</span> <span class="s1">&#39;short-rib&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;data-bar&#39;</span><span class="p">,</span> <span class="s1">&#39;cutlet&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;data-baz&#39;</span><span class="p">,</span> <span class="s1">&#39;filet&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;I can haz contents?&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">sibling</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;I too can haz contents?&#39;</span><span class="p">);</span>
</code></pre></figure>


<p>Unfortunately this is still a lot of code and my first solution to slim it down is to create a helper function. At that point we&#8217;re basically back to design by configuration&#8230; I&#8217;m not entirely ready to give up on this approach because I feel like their <em>might</em> be something here, I&#8217;m just not sure what yet. I think the design by configuration problem falls right into that sweet spot between not needing to create a factory and obviously needing to create a factory. I&#8217;ll try to explore this more in a later post. For now it&#8217;s time for bed.</p>

<p>You should follow me on Twitter <a href="http://twitter.com/rob_dodson">here.</a></p>

	</section>
	<div class="newsletter">
  <form action="http://robdodson.us7.list-manage2.com/subscribe/post?u=5727aa0eb1ccbf4ae68284189&amp;id=6719a28b56" method="post" target="_blank" novalidate>
    <p class="newsletter-heading newsletter-primary">Get your learn on.</p>
    <p class="newsletter-heading newsletter-sub">
      Weekly emails cover Web Components, and the future of
      Front-end Development.
    </p>
    <input class="newsletter-email" type="email" value="" name="EMAIL" placeholder="your@email.com">
    <input type="hidden" name="group[4133][1]" value="true">
    <input class="newsletter-submit" type="submit" value="Subscribe" name="subscribe">
  </form>
</div>

  <footer class="post-footer">
  <section class="author">
    <h4>Rob Dodson</h4>
    <p></p>
  </section>
  <section class="share">
    <h4>Share this post</h4>
    <a class="icon-twitter" href="http://twitter.com/share?text=Design by Configuration Sucks&amp;url=http://robdodson.github.com/blog/2012/05/10/design-by-configuration-sucks/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://robdodson.github.com/blog/2012/05/10/design-by-configuration-sucks/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=http://robdodson.github.com/blog/2012/05/10/design-by-configuration-sucks/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
    </a>
  </section>
</footer>
  <hr>
  
    <div class="share">
</div>

  
  
  <section id="comment">
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>
  
</article></main>
  <footer class="site-footer"><a class="subscribe icon-feed" href="http://robdodson.github.com/atom.xml"><span class="tooltip">Subscribe!</span></a>
<div class="inner">
  Follow me on <a href="http://twitter.com/rob_dodson" rel="me">Twitter</a>, <a rel="author" href="https://plus.google.com/118271135596408598424">Google+</a> or <a rel="me" href="http://github.com/robdodson">Github</a>
  <section class="copyright">All content copyright <a href="/">Rob Dodson</a> © 2013 • All rights reserved.</section>
  <section class="poweredby">Casper theme by <a class="icon-ghost" href="http://tryghost.org">Ghost</a> &amp; Published with <a href="http://octopress.org">Octopress</a></section>
</div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="//yandex.st/highlightjs/7.3/highlight.min.js"></script>  
<script>hljs.initHighlightingOnLoad()</script>


<script type="text/javascript">
      var disqus_shortname = 'robdodsontalksinternets';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://robdodson.github.com/blog/2012/05/10/design-by-configuration-sucks/';
        var disqus_url = 'http://robdodson.github.com/blog/2012/05/10/design-by-configuration-sucks/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-25869920-2']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</body>
</html>
